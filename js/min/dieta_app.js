function pulsantePremuto(a){a.style.boxShadow="0 3px 18px -5px #000"}function pulsanteRilasciato(a){a.style.boxShadow="0 3px 8px -5px #000"}function mostraBlock(a){a.style.display="block"}function nascondiNone(a){a.style.display="none"}function eventPulsante(a,b,c){a.addEventListener(b,function(a){c(a.target)},!1)}function showSuggerimento(a,b){suggerimento.style.display="block",suggerimento.innerHTML=a,this.hideSuggerimento=function(){suggerimento.style.display="none"},setTimeout("this.hideSuggerimento(this)",b)}function creaElementi(a,b,c){var d=document.createElement(a);if(b)for(var e in b)b.hasOwnProperty(e)&&d.setAttribute(e,b[e]);for(var f in c)c.hasOwnProperty(f)&&(d.style[f]=c[f]);for(var g=3;g<arguments.length;g++){var h=arguments[g];"string"==typeof h&&(h=document.createTextNode(h)),d.appendChild(h)}return d}function creaLista(a,b,c,d,e,f){var g=document.createElement("select");g.setAttribute("class",a);var h=document.createElement("option");h.value=0;var i=document.createTextNode(b);h.appendChild(i),g.appendChild(h);for(var j=c;j<d;j+=e){var k=document.createElement("option");k.value=j,k.textContent=j,g.appendChild(k)}return g.value=f,g}function storePasti(){btnRiprendiDieta.style.display="none";var a=sessionStorage.getItem("pasto"),b=sessionStorage.getItem("NomeAlimento"),c=parseFloat(sessionStorage.getItem("mproteine")),d=parseFloat(sessionStorage.getItem("mgrassi")),e=parseFloat(sessionStorage.getItem("mcarbo")),f=parseFloat(sessionStorage.getItem("mfibre")),g=sessionStorage.getItem("mNa"),h=sessionStorage.getItem("mK"),i=sessionStorage.getItem("mFe"),j=sessionStorage.getItem("mCa"),k=sessionStorage.getItem("mP"),l=sessionStorage.getItem("mMg"),m=sessionStorage.getItem("mZn"),n=sessionStorage.getItem("mCu"),o=sessionStorage.getItem("mSe"),p=sessionStorage.getItem("mB1"),q=sessionStorage.getItem("mB2"),r=sessionStorage.getItem("mB3"),s=sessionStorage.getItem("mA"),t=sessionStorage.getItem("mC"),u=sessionStorage.getItem("mE"),v=sessionStorage.getItem("mbirra"),w=sessionStorage.getItem("mvinoBianco"),x=sessionStorage.getItem("mvinoRosso");if("colazione"===a)var y=creaElementi("div",{"class":"divPasto",draggable:"true"},{background:"#fafaaa"});else if("pranzo"===a)var y=creaElementi("div",{"class":"divPasto",draggable:"true"},{background:"#ffbe88"});else if("cena"===a)var y=creaElementi("div",{"class":"divPasto",draggable:"true"},{background:"#aafaf5"});else var y=creaElementi("div",{"class":"divPasto",draggable:"true"},{background:"#fff"});var z=creaElementi("span",null,{display:"none"},a),A=creaElementi("span",{proteine:c,grassi:d,carbo:e,fibre:f,sodio:g,potassio:h,ferro:i,calcio:j,fosforo:k,magnesio:l,zinco:m,rame:n,selenio:o,b1:p,b2:q,b3:r,a:s,c:t,e:u,birra:v,vinoBianco:w,vinoRosso:x},{display:"inline-block",width:"70%"},b),B=creaLista("porzioneGrammi","gr.",10,300,10,0),C=creaElementi("span",null,{display:"inline-block",width:"20%"},B);y.appendChild(z),y.appendChild(A),y.appendChild(C);for(var ab,D=creaElementi("span",{"class":"valcarbo"},{display:"none"},"0"),E=creaElementi("span",{"class":"valproteine"},{display:"none"},"0"),F=creaElementi("span",{"class":"valgrassi"},{display:"none"},"0"),G=creaElementi("span",{"class":"valfibre"},{display:"none"},"0"),H=creaElementi("span",{"class":"valsodio"},{display:"none"},"0"),I=creaElementi("span",{"class":"valpotassio"},{display:"none"},"0"),J=creaElementi("span",{"class":"valferro"},{display:"none"},"0"),K=creaElementi("span",{"class":"valcalcio"},{display:"none"},"0"),L=creaElementi("span",{"class":"valfosforo"},{display:"none"},"0"),M=creaElementi("span",{"class":"valmagnesio"},{display:"none"},"0"),N=creaElementi("span",{"class":"valzinco"},{display:"none"},"0"),O=creaElementi("span",{"class":"valrame"},{display:"none"},"0"),P=creaElementi("span",{"class":"valselenio"},{display:"none"},"0"),Q=creaElementi("span",{"class":"valb1"},{display:"none"},"0"),R=creaElementi("span",{"class":"valb2"},{display:"none"},"0"),S=creaElementi("span",{"class":"valb3"},{display:"none"},"0"),T=creaElementi("span",{"class":"vala"},{display:"none"},"0"),U=creaElementi("span",{"class":"valc"},{display:"none"},"0"),V=creaElementi("span",{"class":"vale"},{display:"none"},"0"),W=creaElementi("span",{"class":"valbirra"},{display:"none"},"0"),X=creaElementi("span",{"class":"valvinobianco"},{display:"none"},"0"),Y=creaElementi("span",{"class":"valvinorosso"},{display:"none"},"0"),Z=creaElementi("button",{"class":"annullaPasto"},{display:"inline-block",width:"8%"},"X"),$=[D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z],_=0;ab=$[_];_++)y.appendChild(ab);pastiScelti.appendChild(y)}function allarmeRosso(a,b,c){a>b?(c.style.background="red",c.style.color="white"):(c.style.background="",c.style.color="")}function insertVal(a,b,c){for(var e,h,d=document.querySelectorAll(a),f=0,g=0;h=d[g];g++)e=parseFloat(h.firstChild.nodeValue),f+=e,macronutrienti.children[b].children[2].innerHTML=f.toFixed(0),c&&allarmeRosso(f,c,macronutrienti.children[b].children[2])}function insertVal2(a,b,c){for(var e,h,d=document.querySelectorAll(a),f=0,g=0;h=d[g];g++)e=parseFloat(h.firstChild.nodeValue),f+=e,vitMin.children[b].children[2].innerHTML=f.toFixed(c)}function insetValAlcol(a,b,c){for(var e,h,d=document.querySelectorAll(a),f=0,g=0;h=d[g];g++)e=parseFloat(h.firstChild.nodeValue),f+=e,alimentiAlcol.children[b].innerHTML=f.toFixed(c)}function showRisultati(){for(var c,a=document.querySelectorAll("select.porzioneGrammi"),b=0;c=a[b];b++)c.addEventListener("change",function(a){memDieta.style.display="block",io=a.target;var b=io.value,c=io.parentNode,d=c.previousElementSibling,e=c.nextElementSibling,f=e.nextElementSibling,g=f.nextElementSibling,h=g.nextElementSibling,i=h.nextElementSibling,j=i.nextElementSibling,k=j.nextElementSibling,l=k.nextElementSibling,m=l.nextElementSibling,n=m.nextElementSibling,o=n.nextElementSibling,p=o.nextElementSibling,q=p.nextElementSibling,r=q.nextElementSibling,s=r.nextElementSibling,t=s.nextElementSibling,u=t.nextElementSibling,v=u.nextElementSibling,a=v.nextElementSibling,w=a.nextElementSibling,x=w.nextElementSibling,y=x.nextElementSibling,z=d.getAttribute("carbo");z=z*b/100,e.innerHTML=z;var A=d.getAttribute("proteine");A=A*b/100,f.innerHTML=A;var B=d.getAttribute("grassi");B=B*b/100,g.innerHTML=B;var C=d.getAttribute("fibre");C=C*b/100,h.innerHTML=C;var D=d.getAttribute("sodio");D=D*b/100,i.innerHTML=D;var E=d.getAttribute("potassio");E=E*b/100,j.innerHTML=E;var F=d.getAttribute("ferro");F=F*b/100,k.innerHTML=F;var G=d.getAttribute("calcio");G=G*b/100,l.innerHTML=G;var H=d.getAttribute("fosforo");H=H*b/100,m.innerHTML=H;var I=d.getAttribute("magnesio");I=I*b/100,n.innerHTML=I;var J=d.getAttribute("zinco");J=J*b/100,o.innerHTML=J;var K=d.getAttribute("rame");K=K*b/100,p.innerHTML=K;var L=d.getAttribute("selenio");L=L*b/100,q.innerHTML=L;var M=d.getAttribute("b1");M=M*b/100,r.innerHTML=M;var N=d.getAttribute("b2");N=N*b/100,s.innerHTML=N;var O=d.getAttribute("b3");O=O*b/100,t.innerHTML=O;var P=d.getAttribute("a");P=P*b/100,u.innerHTML=P;var Q=d.getAttribute("c");Q=Q*b/100,v.innerHTML=Q;var R=d.getAttribute("e");R=R*b/100,a.innerHTML=R,insertVal("span.valcarbo",1,needCarboidrati),insertVal("span.valproteine",2,needProteine),insertVal("span.valgrassi",3,needGrassi),insertVal2("span.valfibre",0,0),insertVal2("span.valsodio",1,0),insertVal2("span.valpotassio",2,0),insertVal2("span.valferro",3,2),insertVal2("span.valcalcio",4,0),insertVal2("span.valfosforo",5,0),insertVal2("span.valmagnesio",6,0),insertVal2("span.valzinco",7,2),insertVal2("span.valrame",8,2),insertVal2("span.valselenio",9,3),insertVal2("span.valb1",10,2),insertVal2("span.valb2",11,2),insertVal2("span.valb3",12,2),insertVal2("span.vala",13,2),insertVal2("span.valc",14,2),insertVal2("span.vale",15,2);var S=d.getAttribute("birra");S=S*b/100,w.innerHTML=S;var T=d.getAttribute("vinoBianco");T=T*b/100,x.innerHTML=T;var U=d.getAttribute("vinoRosso");U=U*b/100,y.innerHTML=U,insetValAlcol("span.valbirra",0,2),insetValAlcol("span.valvinobianco",1,2),insetValAlcol("span.valvinorosso",2,2);var V=macronutrienti.children[1].children[2].firstChild.nodeValue,W=macronutrienti.children[2].children[2].firstChild.nodeValue,X=macronutrienti.children[3].children[2].firstChild.nodeValue,Y=alimentiAlcol.children[0].firstChild.nodeValue;Y=parseFloat(Y);var Z=alimentiAlcol.children[1].firstChild.nodeValue;Z=parseFloat(Z);var $=alimentiAlcol.children[2].firstChild.nodeValue;$=parseFloat($);var _=9*X+4*W+4*V+Y+Z+$;macronutrienti.children[4].children[2].innerHTML=_.toFixed(0),allarmeRosso(_,mieCalorie,macronutrienti.children[4].children[2]),setTimeout("showSuggerimento('Carboidrati: "+z.toFixed(2)+" - Proteine: "+A.toFixed(2)+" - Grassi: "+B.toFixed(2)+"',4000)",100)},!1);for(var f,d=document.querySelectorAll("button.annullaPasto"),e=0;f=d[e];e++)f.addEventListener("click",function(a){io=a.target,yvr=io.previousElementSibling,yvb=yvr.previousElementSibling,ybir=yvb.previousElementSibling,ye=ybir.previousElementSibling,yc=ye.previousElementSibling,ya=yc.previousElementSibling,yb3=ya.previousElementSibling,yb2=yb3.previousElementSibling,yb1=yb2.previousElementSibling,ysel=yb1.previousElementSibling,yram=ysel.previousElementSibling,yzin=yram.previousElementSibling,ymag=yzin.previousElementSibling,yfos=ymag.previousElementSibling,ycal=yfos.previousElementSibling,yfer=ycal.previousElementSibling,ypot=yfer.previousElementSibling,ysod=ypot.previousElementSibling,yfib=ysod.previousElementSibling,ygra=yfib.previousElementSibling,ypro=ygra.previousElementSibling,ycar=ypro.previousElementSibling;var b=macronutrienti.children[3].children[2].firstChild.nodeValue;if(ygra.firstChild){var c=parseFloat(b)-parseFloat(ygra.firstChild.nodeValue);macronutrienti.children[3].children[2].innerHTML=c.toFixed(2),allarmeRosso(c,needGrassi,macronutrienti.children[3].children[2])}var d=macronutrienti.children[2].children[2].firstChild.nodeValue;if(ypro.firstChild){var e=parseFloat(d)-parseFloat(ypro.firstChild.nodeValue);macronutrienti.children[2].children[2].innerHTML=e.toFixed(2),allarmeRosso(e,needProteine,macronutrienti.children[2].children[2])}var f=macronutrienti.children[1].children[2].firstChild.nodeValue;if(ycar.firstChild){var g=parseFloat(f)-parseFloat(ycar.firstChild.nodeValue);macronutrienti.children[1].children[2].innerHTML=g.toFixed(2),allarmeRosso(g,needCarboidrati,macronutrienti.children[1].children[2])}var h=vitMin.children[0].children[2].firstChild.nodeValue;if(yfib.firstChild){var i=parseFloat(h)-parseFloat(yfib.firstChild.nodeValue);vitMin.children[0].children[2].innerHTML=i.toFixed(2)}var j=vitMin.children[1].children[2].firstChild.nodeValue;if(ysod.firstChild){var k=parseFloat(j)-parseFloat(ysod.firstChild.nodeValue);vitMin.children[1].children[2].innerHTML=k.toFixed(2)}var l=vitMin.children[2].children[2].firstChild.nodeValue;if(ypot.firstChild){var m=parseFloat(l)-parseFloat(ypot.firstChild.nodeValue);vitMin.children[2].children[2].innerHTML=m.toFixed(2)}var n=vitMin.children[3].children[2].firstChild.nodeValue;if(yfer.firstChild){var o=parseFloat(n)-parseFloat(yfer.firstChild.nodeValue);vitMin.children[3].children[2].innerHTML=o.toFixed(2)}var p=vitMin.children[4].children[2].firstChild.nodeValue;if(ycal.firstChild){var q=parseFloat(p)-parseFloat(ycal.firstChild.nodeValue);vitMin.children[4].children[2].innerHTML=q.toFixed(2)}var r=vitMin.children[5].children[2].firstChild.nodeValue;if(yfos.firstChild){var s=parseFloat(r)-parseFloat(yfos.firstChild.nodeValue);vitMin.children[5].children[2].innerHTML=s.toFixed(2)}var t=vitMin.children[6].children[2].firstChild.nodeValue;if(ymag.firstChild){var u=parseFloat(t)-parseFloat(ymag.firstChild.nodeValue);vitMin.children[6].children[2].innerHTML=u.toFixed(2)}var v=vitMin.children[7].children[2].firstChild.nodeValue;if(yzin.firstChild){var w=parseFloat(v)-parseFloat(yzin.firstChild.nodeValue);vitMin.children[7].children[2].innerHTML=w.toFixed(2)}var x=vitMin.children[8].children[2].firstChild.nodeValue;if(yram.firstChild){var y=parseFloat(x)-parseFloat(yram.firstChild.nodeValue);vitMin.children[8].children[2].innerHTML=y.toFixed(2)}var z=vitMin.children[9].children[2].firstChild.nodeValue;if(ysel.firstChild){var A=parseFloat(z)-parseFloat(ysel.firstChild.nodeValue);vitMin.children[9].children[2].innerHTML=A.toFixed(2)}var B=vitMin.children[10].children[2].firstChild.nodeValue;if(yb1.firstChild){var C=parseFloat(B)-parseFloat(yb1.firstChild.nodeValue);vitMin.children[10].children[2].innerHTML=C.toFixed(2)}var D=vitMin.children[11].children[2].firstChild.nodeValue;if(yb2.firstChild){var E=parseFloat(D)-parseFloat(yb2.firstChild.nodeValue);vitMin.children[11].children[2].innerHTML=E.toFixed(2)}var F=vitMin.children[12].children[2].firstChild.nodeValue;if(yb3.firstChild){var G=parseFloat(F)-parseFloat(yb3.firstChild.nodeValue);vitMin.children[12].children[2].innerHTML=G.toFixed(2)}var H=vitMin.children[13].children[2].firstChild.nodeValue;if(ya.firstChild){var I=parseFloat(H)-parseFloat(ya.firstChild.nodeValue);vitMin.children[13].children[2].innerHTML=I.toFixed(2)}var J=vitMin.children[14].children[2].firstChild.nodeValue;if(yc.firstChild){var K=parseFloat(J)-parseFloat(yc.firstChild.nodeValue);vitMin.children[14].children[2].innerHTML=K.toFixed(2)}var L=vitMin.children[15].children[2].firstChild.nodeValue;if(ye.firstChild){var M=parseFloat(L)-parseFloat(ye.firstChild.nodeValue);vitMin.children[15].children[2].innerHTML=M.toFixed(2)}var N=alimentiAlcol.children[0].firstChild.nodeValue;if(ybir.firstChild){var O=parseFloat(N)-parseFloat(ybir.firstChild.nodeValue);alimentiAlcol.children[0].innerHTML=O.toFixed(2)}var P=alimentiAlcol.children[1].firstChild.nodeValue;if(yvb.firstChild){var Q=parseFloat(P)-parseFloat(yvb.firstChild.nodeValue);alimentiAlcol.children[1].innerHTML=Q.toFixed(2)}var R=alimentiAlcol.children[2].firstChild.nodeValue;if(yvr.firstChild){var S=parseFloat(R)-parseFloat(yvr.firstChild.nodeValue);alimentiAlcol.children[2].innerHTML=S.toFixed(2)}if(ygra.firstChild&&ypro.firstChild&&ycar.firstChild){var T=9*c+4*e+4*g+O+Q+S;macronutrienti.children[4].children[2].innerHTML=T.toFixed(0),allarmeRosso(T,mieCalorie,macronutrienti.children[4].children[2]);var U=io.parentNode;U.parentNode.removeChild(U),a.stopImmediatePropagation()}else{var U=io.parentNode;U.parentNode.removeChild(U),a.stopImmediatePropagation()}},!1)}function bevande(a){"birra chiara"===a?(sessionStorage.setItem("mbirra",19),sessionStorage.setItem("mvinoBianco",0),sessionStorage.setItem("mvinoRosso",0)):"vino bianco"===a?(sessionStorage.setItem("mbirra",0),sessionStorage.setItem("mvinoBianco",70),sessionStorage.setItem("mvinoRosso",0)):"vino rosso"===a?(sessionStorage.setItem("mbirra",0),sessionStorage.setItem("mvinoBianco",0),sessionStorage.setItem("mvinoRosso",75)):(sessionStorage.setItem("mbirra",0),sessionStorage.setItem("mvinoBianco",0),sessionStorage.setItem("mvinoRosso",0))}function loadAlimenti(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){for(var e,g,a=JSON.parse(c.responseText),d=["proteine","grassi","carbo","fibre","Na","K","Fe","Ca","P","Mg","Zn","Cu","Se","B1","B2","B3","A","C","E"],f=0;g=a[f];f++){var h=g.nome;if(h===b){bevande(b);for(var j,i=0;j=d[i];i++){var k=g[j];e="m"+j,sessionStorage.setItem(e,k)}}}storePasti(),showRisultati(),dragEdrop()}},c.open("GET",a,!0),c.send()}function alimentoCat(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4==b.readyState&&200==b.status){for(var d,a=JSON.parse(b.responseText),c=0;d=a[c];c++){var e=d.replace(/\s/g,"-"),f=e.replace(/'/g,"@");alimentiDiCateg.innerHTML+='<button class="catAlimenti" id='+f+">"+d+"</button><br> "}for(var i,g=document.getElementsByClassName("catAlimenti"),h=0;i=g[h];h++)i.addEventListener("click",function(a){var b=a.target,d=(sessionStorage.getItem("pasto"),b.getAttribute("id").replace(/-/g," ")),e=d.replace(/@/,"'"),f=sessionStorage.getItem("categorieAlimenti");loadAlimenti("json/cat/"+f+".json",e),alimVegetariani.style.display="none",alimentiDiCateg.style.display="none",colPranzoCena.style.display="block",sessionStorage.setItem("NomeAlimento",e),setTimeout("showSuggerimento('Seleziona la quantit\xe0 in grammi',2000)",600),window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0},!1);dragEdrop()}document.location.href="#alimentiDiCateg"},b.open("GET",a,!0),b.send()}function loadCat(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState&&200==c.status)for(var e,a=JSON.parse(c.responseText),d=0;e=a[d];d++)e==b&&alimentoCat("json/cat"+b+".json")},c.open("GET",a,!0),c.send()}function storageProp(a,b,c,d,e){var f=c.children[1].getAttribute(e);localStorage.setItem("fab"+e+d,f);var g=c.children[a].firstChild.nodeValue;localStorage.setItem("val"+e+d,g);var h=macronutrienti.children[b].children[2].firstChild.nodeValue;localStorage.setItem("tot"+e+d,h)}function storageProp2(a,b,c,d,e){var f=c.children[1].getAttribute(e);localStorage.setItem("fab"+e+d,f);var g=c.children[a].firstChild.nodeValue;localStorage.setItem("val"+e+d,g);var h=vitMin.children[b].children[2].firstChild.nodeValue;localStorage.setItem("tot"+e+d,h)}function storageProp3(a,b,c,d,e){var f=c.children[1].getAttribute(e);localStorage.setItem("fab"+e+d,f);var g=c.children[a].firstChild.nodeValue;localStorage.setItem("val"+e+d,g);var h=alimentiAlcol.children[b].firstChild.nodeValue;localStorage.setItem("tot"+e+d,h)}function dragEdrop(){for(var a=document.querySelectorAll("div.divPasto"),b=null,c=0;c<a.length;c++)a[c].addEventListener("dragstart",function(a){a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text",this.innerHTML),b=a.target}),a[c].addEventListener("dragend",function(){b=null});pastiScelti.addEventListener("dragover",function(a){return a.preventDefault&&a.preventDefault(),a.dataTransfer.dropEffect="move",!1});for(var c=0;c<a.length;c++)a[c].addEventListener("drop",function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation();var c=this.nextElementSibling,d=this.offsetTop,e=b.offsetTop;d>e?pastiScelti.insertBefore(b,c):pastiScelti.insertBefore(b,this)},!1)}var interrogativo=document.getElementById("int"),spiegaz=document.getElementById("spiegaz"),xInfo=document.getElementById("xInfo"),scuro=document.getElementById("scuro");eventPulsante(interrogativo,"mousedown",pulsantePremuto),eventPulsante(interrogativo,"mouseup",pulsanteRilasciato),interrogativo.addEventListener("click",function(){spiegaz.style.top=0,spiegaz.style.transition="top 300ms ease-out 200ms",setTimeout("mostraBlock(scuro);",500)},!1),xInfo.addEventListener("click",function(){setTimeout("nascondiNone(scuro);",500),spiegaz.style.top="-1000px",spiegaz.style.transition="top 500ms ease-in 200ms",interrogativo.style.display="block",interrogativo.style.display="flex"},!1);var acca1=document.getElementById("h1Dieta"),ceckCalorie=document.getElementById("ceckCalorie"),fabbisogniEnergetici=document.getElementById("fabbisogniEnergetici"),divoVV=document.getElementById("veganVegetariano"),colPranzoCena=document.getElementById("colPranzoCena"),alimVegetariani=document.querySelector("#alimVegetariani"),alimentiDiCateg=document.getElementById("alimentiDiCateg"),macronutrienti=document.getElementById("macronutrienti"),pastiScelti=document.getElementById("pastiScelti"),suggerimento=document.getElementById("suggerimento"),vitMin=document.getElementById("vitamine-minerali"),alimentiAlcol=document.getElementById("alimentiAlcol"),mostraFMV=document.getElementById("boxMmostraFVM"),memDieta=document.getElementById("memorizzaDieta"),btnCancellaDieta=document.getElementById("btnCancellaDieta"),btnDietaPausa=document.getElementById("btnDietaPausa"),btnRiprendiDieta=document.getElementById("btnRiprendiDieta"),eliminazioneDieta=document.getElementById("eliminazioneDieta"),confermaX=document.getElementById("confermaX"),annullaX=document.getElementById("annullaX"),mieCalorie=localStorage.getItem("mieCalorie");if(mieCalorie)ceckCalorie.style.display="none";else{fabbisogniEnergetici.style.display="none",macronutrienti.style.display="none",divoVV.style.display="none",mostraFMV.style.display="none";var df=document.createDocumentFragment(),codice=document.createElement("script");codice.type="text/javascript",codice.src="js/calcola_calorie_app.js",df.appendChild(codice),document.body.appendChild(df)}var needCarboidrati=(.65*mieCalorie/4).toFixed(0),needProteine=(.1*mieCalorie/4).toFixed(0),needGrassi=(.25*mieCalorie/9).toFixed(0);macronutrienti.children[1].children[1].innerHTML=needCarboidrati,macronutrienti.children[2].children[1].innerHTML=needProteine,macronutrienti.children[3].children[1].innerHTML=needGrassi,macronutrienti.children[4].children[1].innerHTML=mieCalorie;for(var fFibre=25,fSodio=localStorage.getItem("sodio"),fPotassio=localStorage.getItem("potassio"),fFerro=localStorage.getItem("ferro"),fCalcio=localStorage.getItem("calcio"),fFosforo=localStorage.getItem("fosforo"),fMagnesio=localStorage.getItem("magnesio"),fZinco=localStorage.getItem("zinco"),fRame=localStorage.getItem("rame"),fSelenio=localStorage.getItem("selenio"),fB1=localStorage.getItem("vitB1"),fB2=localStorage.getItem("vitB2"),fB3=localStorage.getItem("vitB3"),fA=localStorage.getItem("vitA"),fC=localStorage.getItem("vitC"),fE=localStorage.getItem("vitE"),arrFMV=[fFibre,fSodio,fPotassio,fFerro,fCalcio,fFosforo,fMagnesio,fZinco,fRame,fSelenio,fB1,fB2,fB3,fA,fC,fE],v=0;v<arrFMV.length;v++)vitMin.children[v].children[1].innerHTML=arrFMV[v];var elementDragged=null;mostraFMV.addEventListener("click",function(){var b=vitMin.style.display;"block"===b?(vitMin.style.display="none",this.innerHTML="Mostra minerali e vitamine"):(vitMin.style.display="block",this.innerHTML="Nascondi minerali e vitamine")},!1);var etico=document.getElementById("btnVeganVeget");etico.addEventListener("click",function(){fabbisogniEnergetici.style.display="none",acca1.style.display="none",divoVV.style.display="none",colPranzoCena.style.display="block",document.location.href="#colPranzoCena"},!1),colPranzoCena.addEventListener("click",function(a){var b=a.target;colPranzoCena.style.display="none",alimVegetariani.style.display="block";var c=b.getAttribute("id");sessionStorage.setItem("pasto",c),alimVegetariani.firstElementChild.innerHTML="Scegli gli alimenti per <b>"+c+"</b><br>",document.location.href="#alimVegetariani"},!1),alimVegetariani.addEventListener("click",function(a){alimentiDiCateg.style.display="block";var b=a.target,c=b.getAttribute("class").slice(1);sessionStorage.setItem("categorieAlimenti",c),document.querySelector("#alimentiDiCateg").innerHTML="",loadCat("json/catAlimenti.json",c)},!1);var xChiudiCatAlimenti=document.querySelector("div.xChiudiCatAlimenti");xChiudiCatAlimenti.addEventListener("click",function(){alimVegetariani.style.display="none",colPranzoCena.style.display="block",alimentiDiCateg.innerHTML=""},!1),btnDietaPausa.addEventListener("click",function(){localStorage.setItem("pausadieta","si");var a=document.querySelector("#pastiScelti"),b=a.children,c=macronutrienti.children[4].children[2].firstChild.nodeValue;localStorage.setItem("kcal",c),localStorage.setItem("numPasti",b.length);for(var f,d=0,e=0;f=b[e];e++){d++;for(var i,g=["pasto"+d,"alimento"+d,"grammi"+d,"fabcarbo"+d,"valcarbo"+d,"totcarbo"+d,"fabproteine"+d,"valproteine"+d,"totproteine"+d,"fabgrassi"+d,"valgrassi"+d,"totgrassi"+d,"fabfibre"+d,"valfibre"+d,"totfibre"+d,"fabsodio"+d,"valsodio"+d,"totsodio"+d,"fabpotassio"+d,"valpotassio"+d,"totpotassio"+d,"fabferro"+d,"valferro"+d,"totferro"+d,"fabcalcio"+d,"valcalcio"+d,"totcalcio"+d,"fabfosforo"+d,"valfosforo"+d,"totfosforo"+d,"fabmagnesio"+d,"valmagnesio"+d,"totmagnesio"+d,"fabzinco"+d,"valzinco"+d,"totzinco"+d,"fabrame"+d,"valrame"+d,"totrame"+d,"fabselenio"+d,"valselenio"+d,"totselenio"+d,"fabb1"+d,"valb1"+d,"totb1"+d,"fabb2"+d,"valb2"+d,"totb2"+d,"fabb3"+d,"valb3"+d,"totb3"+d,"faba"+d,"vala"+d,"tota"+d,"fabc"+d,"valc"+d,"totc"+d,"fabe"+d,"vale"+d,"tote"+d,"fabbirra"+d,"valbirra"+d,"totbirra"+d,"fabvinobianco"+d,"valvinobianco"+d,"totvinobianco"+d,"fabvinorosso"+d,"valvinorosso"+d,"totvinorosso"+d],h=0;i=g[h];h++)localStorage.removeItem(i);var j=f.children[0].firstChild.nodeValue;localStorage.setItem("pasto"+d,j);var k=f.children[1].firstChild.nodeValue;localStorage.setItem("alimento"+d,k);var l=f.children[2].children[0].value;localStorage.setItem("grammi"+d,l),storageProp(3,1,f,d,"carbo"),storageProp(4,2,f,d,"proteine"),storageProp(5,3,f,d,"grassi"),storageProp2(6,0,f,d,"fibre"),storageProp2(7,1,f,d,"sodio"),storageProp2(8,2,f,d,"potassio"),storageProp2(9,3,f,d,"ferro"),storageProp2(10,4,f,d,"calcio"),storageProp2(11,5,f,d,"fosforo"),storageProp2(12,6,f,d,"magnesio"),storageProp2(13,7,f,d,"zinco"),storageProp2(14,8,f,d,"rame"),storageProp2(15,9,f,d,"selenio"),storageProp2(16,10,f,d,"b1"),storageProp2(17,11,f,d,"b2"),storageProp2(18,12,f,d,"b3"),storageProp2(19,13,f,d,"a"),storageProp2(20,14,f,d,"c"),storageProp2(21,15,f,d,"e"),storageProp3(22,0,f,d,"birra"),storageProp3(23,1,f,d,"vinobianco"),storageProp3(24,2,f,d,"vinorosso")}window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,setTimeout("showSuggerimento('La dieta \xe8 stata messa in pausa. Puoi recuperarla, in seguito, cliccando su <ins>Riprendi dieta</ins>',3000)",600)},!1),btnRiprendiDieta.addEventListener("click",function(){this.style.display="none",acca1.style.display="none",fabbisogniEnergetici.style.display="none",memDieta.style.display="block";for(var a=localStorage.getItem("numPasti"),b=parseFloat(localStorage.getItem("kcal")),c=1;c<=a;c++){var d=localStorage.getItem("pasto"+c),e=localStorage.getItem("alimento"+c),f=localStorage.getItem("grammi"+c),g=localStorage.getItem("fabproteine"+c),h=localStorage.getItem("valproteine"+c),i=localStorage.getItem("fabgrassi"+c),j=localStorage.getItem("valgrassi"+c),k=parseFloat(localStorage.getItem("fabcarbo"+c)),l=localStorage.getItem("valcarbo"+c),m=localStorage.getItem("fabfibre"+c),n=localStorage.getItem("valfibre"+c),o=localStorage.getItem("fabsodio"+c),p=localStorage.getItem("valsodio"+c),q=localStorage.getItem("fabpotassio"+c),r=localStorage.getItem("valpotassio"+c),s=localStorage.getItem("fabferro"+c),t=localStorage.getItem("valferro"+c),u=localStorage.getItem("fabcalcio"+c),v=localStorage.getItem("valcalcio"+c),w=localStorage.getItem("fabfosforo"+c),x=localStorage.getItem("valfosforo"+c),y=localStorage.getItem("fabmagnesio"+c),z=localStorage.getItem("valmagnesio"+c),A=localStorage.getItem("fabzinco"+c),B=localStorage.getItem("valzinco"+c),C=localStorage.getItem("fabrame"+c),D=localStorage.getItem("valrame"+c),E=localStorage.getItem("fabselenio"+c),F=localStorage.getItem("valselenio"+c),G=localStorage.getItem("fabb1"+c),H=localStorage.getItem("valb1"+c),I=localStorage.getItem("fabb2"+c),J=localStorage.getItem("valb2"+c),K=localStorage.getItem("fabb3"+c),L=localStorage.getItem("valb3"+c),M=localStorage.getItem("faba"+c),N=localStorage.getItem("vala"+c),O=localStorage.getItem("fabc"+c),P=localStorage.getItem("valc"+c),Q=localStorage.getItem("fabe"+c),R=localStorage.getItem("vale"+c),S=localStorage.getItem("fabbirra"+c),T=localStorage.getItem("valbirra"+c),U=localStorage.getItem("fabvinobianco"+c),V=localStorage.getItem("valvinobianco"+c),W=localStorage.getItem("fabvinorosso"+c),X=localStorage.getItem("valvinorosso"+c);if("colazione"===d)var Y=creaElementi("div",{"class":"divPasto",draggable:"true"},{background:"#fafaaa"});else if("pranzo"===d)var Y=creaElementi("div",{"class":"divPasto",draggable:"true"},{background:"#ffbe88"});else if("cena"===d)var Y=creaElementi("div",{"class":"divPasto",draggable:"true"},{background:"#aafaf5"});else var Y=creaElementi("div",{"class":"divPasto",draggable:"true"},{background:"#fff"});var Z=creaElementi("span",null,{display:"none"},d),$=creaElementi("span",{proteine:g,grassi:i,carbo:k,fibre:m,sodio:o,potassio:q,ferro:s,calcio:u,fosforo:w,magnesio:y,zinco:A,rame:C,selenio:E,b1:G,b2:I,b3:K,a:M,c:O,e:Q,birra:S,vinobianco:U,vinorosso:W},{display:"inline-block",width:"70%"},e),_=creaLista("porzioneGrammi","gr.",10,300,10,f),ab=creaElementi("span",null,{display:"inline-block",width:"20%"},_);Y.appendChild(Z),Y.appendChild($),Y.appendChild(ab);for(var Ab,bb=creaElementi("span",{"class":"valcarbo"},{display:"none"},l),cb=creaElementi("span",{"class":"valproteine"},{display:"none"},h),db=creaElementi("span",{"class":"valgrassi"},{display:"none"},j),eb=creaElementi("span",{"class":"valfibre"},{display:"none"},n),fb=creaElementi("span",{"class":"valsodio"},{display:"none"},p),gb=creaElementi("span",{"class":"valpotassio"},{display:"none"},r),hb=creaElementi("span",{"class":"valferro"},{display:"none"},t),ib=creaElementi("span",{"class":"valcalcio"},{display:"none"},v),jb=creaElementi("span",{"class":"valfosforo"},{display:"none"},x),kb=creaElementi("span",{"class":"valmagnesio"},{display:"none"},z),lb=creaElementi("span",{"class":"valzinco"},{display:"none"},B),mb=creaElementi("span",{"class":"valrame"},{display:"none"},D),nb=creaElementi("span",{"class":"valselenio"},{display:"none"},F),ob=creaElementi("span",{"class":"valb1"},{display:"none"},H),pb=creaElementi("span",{"class":"valb2"},{display:"none"},J),qb=creaElementi("span",{"class":"valb3"},{display:"none"},L),rb=creaElementi("span",{"class":"vala"},{display:"none"},N),sb=creaElementi("span",{"class":"valc"},{display:"none"},P),tb=creaElementi("span",{"class":"vale"},{display:"none"},R),ub=creaElementi("span",{"class":"valbirra"},{display:"none"},T),vb=creaElementi("span",{"class":"valvinobianco"},{display:"none"},V),wb=creaElementi("span",{"class":"valvinorosso"},{display:"none"},X),xb=creaElementi("button",{"class":"annullaPasto",num:c},{display:"inline-block",width:"8%"},"X"),yb=[bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb],zb=0;Ab=yb[zb];zb++)Y.appendChild(Ab);pastiScelti.appendChild(Y),macronutrienti.children[4].children[2].innerHTML=b.toFixed(0),allarmeRosso(b,mieCalorie,macronutrienti.children[4].children[2]),insertVal("span.valcarbo",1,needCarboidrati),insertVal("span.valproteine",2,needProteine),insertVal("span.valgrassi",3,needGrassi),insertVal2("span.valfibre",0,2),insertVal2("span.valsodio",1,2),insertVal2("span.valpotassio",2,2),insertVal2("span.valferro",3,2),insertVal2("span.valcalcio",4,2),insertVal2("span.valfosforo",5,2),insertVal2("span.valmagnesio",6,2),insertVal2("span.valzinco",7,2),insertVal2("span.valrame",8,2),insertVal2("span.valselenio",9,3),insertVal2("span.valb1",10,2),insertVal2("span.valb2",11,2),insertVal2("span.valb3",12,2),insertVal2("span.vala",13,2),insertVal2("span.valc",14,2),insertVal2("span.vale",15,2),insetValAlcol("span.valbirra",0,2),insetValAlcol("span.valvinobianco",1,2),insetValAlcol("span.valvinorosso",2,2)}showRisultati(),dragEdrop()},!1);var numeroPa=localStorage.getItem("numPasti"),pausadieta=localStorage.getItem("pausadieta");pausadieta&&numeroPa>0&&(btnRiprendiDieta.style.display="block",acca1.style.display="none",fabbisogniEnergetici.style.display="none"),btnCancellaDieta.addEventListener("click",function(){scuro.style.display="block",eliminazioneDieta.style.display="block",window.pageYOffset=document.documentElement.scrollTop=document.body.scrollTop=0},!1),annullaX.addEventListener("click",function(){scuro.style.display="none",eliminazioneDieta.style.display="none"},!1),confermaX.addEventListener("click",function(){scuro.style.display="none",eliminazioneDieta.style.display="none",memDieta.style.display="none",acca1.style.display="block",fabbisogniEnergetici.style.display="block";{var a=document.querySelectorAll("div.divPasto"),b=a.length;pastiScelti.children.length}localStorage.setItem("numPasti",0);for(var d=0,e=0;e<b;e++){pastiScelti.removeChild(a[e]),d++;for(var h,f=["pasto"+d,"alimento"+d,"grammi"+d,"fabcarbo"+d,"valcarbo"+d,"totcarbo"+d,"fabproteine"+d,"valproteine"+d,"totproteine"+d,"fabgrassi"+d,"valgrassi"+d,"totgrassi"+d,"fabfibre"+d,"valfibre"+d,"totfibre"+d,"fabsodio"+d,"valsodio"+d,"totsodio"+d,"fabpotassio"+d,"valpotassio"+d,"totpotassio"+d,"fabferro"+d,"valferro"+d,"totferro"+d,"fabcalcio"+d,"valcalcio"+d,"totcalcio"+d,"fabfosforo"+d,"valfosforo"+d,"totfosforo"+d,"fabmagnesio"+d,"valmagnesio"+d,"totmagnesio"+d,"fabzinco"+d,"valzinco"+d,"totzinco"+d,"fabrame"+d,"valrame"+d,"totrame"+d,"fabselenio"+d,"valselenio"+d,"totselenio"+d,"fabb1"+d,"valb1"+d,"totb1"+d,"fabb2"+d,"valb2"+d,"totb2"+d,"fabb3"+d,"valb3"+d,"totb3"+d,"faba"+d,"vala"+d,"tota"+d,"fabc"+d,"valc"+d,"totc"+d,"fabe"+d,"vale"+d,"tote"+d,"fabbirra"+d,"valbirra"+d,"totbirra"+d,"fabvinobianco"+d,"valvinobianco"+d,"totvinobianco"+d,"fabvinorosso"+d,"valvinorosso"+d,"totvinorosso"+d],g=0;h=f[g];g++)localStorage.removeItem(h)
}macronutrienti.children[1].children[2].innerHTML=0,macronutrienti.children[1].children[2].style.background="",macronutrienti.children[2].children[2].innerHTML=0,macronutrienti.children[2].children[2].style.background="",macronutrienti.children[3].children[2].innerHTML=0,macronutrienti.children[3].children[2].style.background="",macronutrienti.children[4].children[2].innerHTML=0,macronutrienti.children[4].children[2].style.background="",vitMin.children[0].children[2].innerHTML=0,vitMin.children[1].children[2].innerHTML=0,vitMin.children[2].children[2].innerHTML=0,vitMin.children[3].children[2].innerHTML=0,vitMin.children[4].children[2].innerHTML=0,vitMin.children[5].children[2].innerHTML=0,vitMin.children[6].children[2].innerHTML=0,vitMin.children[7].children[2].innerHTML=0,vitMin.children[8].children[2].innerHTML=0,vitMin.children[9].children[2].innerHTML=0,vitMin.children[10].children[2].innerHTML=0,vitMin.children[11].children[2].innerHTML=0,vitMin.children[12].children[2].innerHTML=0,vitMin.children[13].children[2].innerHTML=0,vitMin.children[14].children[2].innerHTML=0,vitMin.children[15].children[2].innerHTML=0,alimentiAlcol.children[0].innerHTML=0,alimentiAlcol.children[1].innerHTML=0,alimentiAlcol.children[2].innerHTML=0,setTimeout("showSuggerimento('La dieta \xe8 stata cancellata',3000)",600)},!1);
